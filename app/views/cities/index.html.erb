<div class="min-h-screen bg-gray-100 py-8">
  <div class="max-w-4xl mx-auto px-4">
    <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Temperature Compare</h1>

    <!-- Add City Form -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-xl font-semibold mb-4 text-gray-700">Add a City</h2>
      <%= form_with url: cities_path, method: :post, class: "flex gap-4" do |f| %>
        <%= f.text_field :city_name,
                         placeholder: "Enter city name (e.g., London, New York)",
                         class: "flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                         required: true %>
        <%= f.submit "Add City",
                     class: "bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" %>
      <% end %>
    </div>

    <!-- Weather Display -->
    <% if @cities.any? %>
      <div class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
        <div class="px-6 py-4 bg-gray-50 border-b">
          <h2 class="text-xl font-semibold text-gray-700">Current Weather</h2>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">City</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Temperature</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Condition</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <% @cities.each do |city_name| %>
                <% weather = WeatherService.get_weather(city_name) %>
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm font-medium text-gray-900"><%= weather ? weather[:city] : city_name %></div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">
                      <% if weather %>
                        <span class="font-semibold"><%= weather[:temp_c] %>°C</span>
                        <span class="text-gray-500 mx-2">/</span>
                        <span class="font-semibold"><%= weather[:temp_f] %>°F</span>
                      <% else %>
                        <span class="text-gray-500">Weather unavailable</span>
                      <% end %>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center text-sm text-gray-900">
                      <% if weather && weather[:icon] %>
                        <img src="http://openweathermap.org/img/wn/<%= weather[:icon] %>.png"
                             alt="<%= weather[:condition] %>"
                             class="w-8 h-8 mr-2">
                        <%= weather[:condition] %>
                      <% else %>
                        <span class="text-gray-500">No data</span>
                      <% end %>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <%= button_to "Remove",
                                  remove_city_path(city_name: city_name),
                                  method: :delete,
                                  class: "text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 px-3 py-1 rounded-md text-sm",
                                  form_class: "inline" %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
     <% else %>
       <div class="bg-white rounded-lg shadow-md p-8 text-center mb-8">
         <div class="text-gray-500">
           <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
           </svg>
           <h3 class="text-lg font-medium text-gray-900 mb-2">No cities added yet</h3>
           <p class="text-gray-500">Add a city above to start comparing weather!</p>
         </div>
       </div>
     <% end %>

     <!-- Temperature Conversion Section -->
     <div class="bg-white rounded-lg shadow-md p-6 mt-8 mb-8" data-controller="temperature-converter">
       <h2 class="text-xl font-semibold mb-4 text-gray-700">Temperature Converter</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div>
           <label for="fahrenheit-input" class="block text-sm font-medium text-gray-700 mb-2">Fahrenheit (°F)</label>
           <input type="number"
                  id="fahrenheit-input"
                  data-temperature-converter-target="fahrenheit"
                  data-action="input->temperature-converter#convertFromFahrenheit"
                  class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Enter °F">
         </div>
         <div>
           <label for="celsius-input" class="block text-sm font-medium text-gray-700 mb-2">Celsius (°C)</label>
           <input type="number"
                  id="celsius-input"
                  data-temperature-converter-target="celsius"
                  data-action="input->temperature-converter#convertFromCelsius"
                  class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Enter °C">
         </div>
       </div>
       <div class="mt-4 text-sm text-gray-500">
         <p>Enter a temperature in either field and the other will be automatically calculated.</p>
       </div>
     </div>
  </div>
</div>
